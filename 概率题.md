### 笔试面试概率题 ###

---

概率题做一个总结。



#### 古典概型 ####

---

一批样本中，**每个样本点发生的可行性相同**（前提条件），这样某种样本点取到的概率为这种**样本的数量占比**。



定义：

随机试验中出现的可能结果称为样本点，记作$\omega$。

所有样本点组成的集合称为样本空间，记作$\Omega = \{\omega|\omega为样本点\}$。

当样本空间$\Omega$仅有有限个元素时，称其子集为一个事件，用大写字母表示，如$A$。

若样本点$\omega \in A$，称事件$A$发生，否则称事件不发生。

$\overline{A} = \Omega - A$称为事件$A$的**对立事件**。容易知道$\omega \in A, \omega \notin \overline{A}$，反之亦然。

特别地，$A = \phi$时，事件称为**不可能事件**。$A = \Omega$时，事件称为**必然事件**。



​		对于古典概型而言，问题转化为了求集合中的元素个数（组合问题）。具体的计算将会利用到排列组合的知识，此处不做详细展开，在例题中对常用到的排列组合数进行举例。



例题：假设不同排列均**等可能**，有$n$个**不同**的球，每次抽取抽取1个球。

（1）有放回地抽取，抽取$m$排成一列，求不同排列总数。

**A：**n个球，每次取一个球，抽取m次，乘法原理，答案为$n^m$。



（2）无放回地抽取，抽取$m$个排成一列，求不同排列总数。

**A：**排列数（A），$A^m_n = \frac{n!}{(n - m)!}$。



（3）无放回地抽取，抽取$m$个忽视次序地组成一组，求不同组合总数。

**A：**组合数（C），$C^m_n = \frac{n!}{(n - m)!m!}$。



（4）将所有球分成$k$个不同的组，忽视每一组中元素的次序，且每组恰好有个$n_1, n_2, ..., n_k$个球（$n_1 + n_2 + ... + n_k = n$），求不同分组结果数。

**A：**利用组合数的公式，$C^{n_1}_n C^{n_2}_n ... C^{n_k}_n = \frac{n!}{(n - n_1)!n_1!} \frac{n!}{(n - n_2)!n_2!} ... \frac{n!}{(n - n_k)!n_k!}$。



（5）方程$x_1 + x_2 + ... + x_n = m$的非负整数解的个数。

**A：**这题理解为有n个小球，分成m份，每份允许有空，共有多少种分法？

隔板法参考 https://www.bilibili.com/video/BV1t7411j7yn/?spm_id_from=333.788.recommend_more_video.6

按照隔板法要求，隔板法至少隔一个球，但是此题可以有空，不符合隔板法的前提条件，怎么办呢？

因此，我们可以假设多加上m个小球，保证每个隔板都至少隔一个小球，分完后，再将各组中去掉一个小球，这样满足了题目要求。

因此利用隔板法（也是插空法）。共有m + n - 1块有序的隔板，第一块板左边的球数就是$x_1$，第一块与第二块之间的球数为$x_2$，以此类推。现在分成m份，需要确定其中m-1个板子的位置。

因此答案为$C^{m-1}_{m + n - 1}$。



（6）方程$x_1 + x_2 + ... + x_n = m$的正整数解的个数。

**A：**插空法，n-1缝隙中插入m-1块板子（除去首尾的缝隙）即可保证所有的$x_i > 0$。第一块板左边的球数就是$x_1$，第一块与第二块之间的球数为$x_2$，以此类推。

现有n-1个位置，确定m-1个位置插板即可。

答案为$C^{m-1}_{n-1}$。



**再来一个古典概型经典问题**，例：

求$n$个人中至少两人同生日的概率（一年365天），假设每个人出生在每天概率相同。

解：很经典的问题，用到了考虑对立事件的方法（对于含有“至少”这样字眼的问题适用）。

考虑对立事件**A：任意两个人生日不同天**，符合古典概型的要求。

总事件个数为$|\Omega| = 365^n$，每个人都有365种选择，一共n个人；

对立事件个数为$|A| = A^n_{365}$；

故所求概率为$1 - \frac{A^n_{365}}{365^n}$。







#### 几何概型 ####

---

对于$A \subseteq R^r$，设$A$的体积存在，记为$m(A)$，后文可能也会称其为**测度**（非严格意义上）。

定义：

试验的样本空间$\Omega, m(\Omega) > 0, A \subseteq \Omega$，若每个样本点等可能地落在$\Omega$中，则称$P(A) = \frac{m(A)}{m(\Omega)}$为事件$A$的发生概率。

由以上定义的概率模型便称为几何概型。类似于古典概型，需要再一次强调的是：每个样本点等可能地落在$\Omega$中。



几何概型经典例题，**等待-相遇问题**。

例：两人某天1点到2点之间等可能地在随机时间到达某地点会面且两人的到达时间相互不影响，先到者等20min后离去，求两人能相遇的概率。

解：

设$x, y$为两人分别到达的时间；

样本空间$\Omega = \{(x, y)| 0 \leq x, y \leq 60\}$，符合几何概型要求；

事件A：两人能够相遇，$A \subseteq \Omega$；

则$A = \{(x, y) | |x - y| \leq 20\}$。

<img src="https://pic2.zhimg.com/80/v2-abae587e4b867d45db91a54c7dc15745_720w.jpg" alt="img" style="zoom: 67%;" />

$x=0时，y=20；x=10时，y=30，...$这样画出蓝色直线；

同理，$y=0时，x=20；y=10时，x=30，...$画出红线。

可看出概率为$\frac{60^2 - 40^2}{60^2} = \frac{5}{9}$。



​		在介绍完最基本的两个概型（古典概型和几何概型）后，我们可以发现**概型的差别的根源是等可能假设之间的差别**。

​		为了进一步体会这一点，举有趣的Bertrand问题作为例子来说明这一点。这里去看知乎链接，不再此详细介绍。







#### 条件概率，乘法公式 ####

---

考虑如下问题：掷一次骰子，已知投掷出的点数为偶数，求投出2的概率。

​		我们注意到在附加了“投掷出的点数为偶数”的条件后，利用古典概型时，事件“投出2”并未改变。变化的是样本空间，它被缩小了。所以条件概率的本质是**对样本空间的限制**。



定义：

$A, B$为事件，则$P(B|A)$指的是在条件$A$下$B$发生的条件概率。

自然地，我们想建立条件概率与一般概率之间的联系。

我们不妨设$P(A) > 0$，否则条件概率必为0。

我们先考虑简单的情况：古典概型下的情况。

此时：
$$
P(B|A) = P(AB|A) = \frac{|AB|}{|A|} = \frac{\frac{|AB|}{|\Omega|}}{\frac{|A|}{|\Omega|}} = \frac{P(AB)}{P(A)}
$$
由此，我们得到了重要的乘法公式。

乘法公式：
$$
P(A) > 0, P(B|A) = \frac{P(AB)}{P(A)}
$$


**事件的独立性**

​		独立性，顾名思义，指的是两个事件相互不产生影响。换句话说，可以理解为有无$A$事件发生作为条件都不影响$B$事件发生的概率。

即$P(B|A) = P(B)$，同乘$P(A)$得到$P(AB) = P(A)P(B)$。

所以很自然地引出如下定义：

若事件$A,B$满足$P(AB) = P(A)P(B)$，则$A$与$B$独立。



在这里需要注意的是事件多于两个的情况。

若事件$A_1, A_2, ..., A_n$满足对于任意$k$个其中事件$P(A_1, A_2, ..., A_k) = P(A_1)P(A_2)...P(A_k)$，其中$\forall k \leq n$。则称这些事件**相互独立**。



我们有必要区分两两独立和相互独立的概念。事实上，**相互独立则必定两两独立，但是反之不成立**。

（**关于相互独立性的一个常见误区**，参考这个反例）

考虑正8面体，分别涂色[ABC,AC,BC,A,A,B,B,C]，此时P(ABC)=1/8，P(A)=P(B)=P(C)=1/2，满足文中相互独立的定义。但P(AB)=1/8，不满足两两独立。

因此上面定义加了一个任意k<=n。



反例：考虑一个四面体，一面红色，一面黄色，一面蓝色，一面三种颜色都有。现在掷此四面体。

$A：$朝下面包含红色；$B：$朝下面包含黄色；$C：$朝下面包含蓝色。

解：容易得到
$$
P(A) = P(B) = P(C) = \frac{1}{2} \\
P(AB) = P(AC) = P(BC) = \frac{1}{4} \\
P(ABC) = \frac{1}{4}
$$
这里解释一下，AB，AC，BC的情况就是三种颜色都有的那一面朝下。

因此，我们可以计算出$P(AB) = P(A)P(B)$，另外两个式子也成立，这里我们认为这三个事件两两独立。

**但是**，$P(ABC) \neq P(A)P(B)P(C)$，故三者并不相互独立。







#### 全概率公式，贝叶斯 ####

---

首先$\bigcup^n_{j=1}A_j$表示集合$\{A_i\}, i = 1, 2, ..., n$两两不相交；$\bigcap^n_{j=1}A_j$表示集合$\{A_i\}, i = 1, 2, ..., n$两两相交。



定理（全概率公式）：

​		事件$A_1, A_2, ..., A_n$互斥，$B \subseteq \bigcup^n_{j=1} A_j$，则$P(B) = \sum^n_{j=1} P(A_j)P(B|A_j)$。

证明：利用概率的有限可加性，利用条件概率乘法公式。
$$
P(B) = P(\bigcup^n_{j=1} BA_j) = \sum^n_{j=1}P(BA_j) = \sum^n_{j=1}P(A_j)P(B|A_j)
$$
​		全概率公式可以理解为$A_1, A_2, ..., A_n$提供了事件$B$的一个两两不交的划分，所以$B$发生的概率就被拆成了$n$个小块的概率之和。

​		全概公式看上去简单，实际非常常用。比如：抽签的公平性就可以用全概公式加以证明。



例（抽签公平性）：n个球，m个黑，剩下全为白，球除了颜色之外没有任何差别。求证：无放回地依次抽取球，每一次抽中黑球的概率都是$\frac{m}{n}$。

证明：

利用数学归纳法。这里着重证明数学归纳法的第二步。

设事件$A_j$表示第j次抽到了黑球，那么$P(A_j)$表示第j次抽到黑球的概率。

已知$P(A_1) = \frac{m}{n}$，由归纳假设，对一切$m \leq n, P(A_{j-1}) = \frac{m}{n}$，

那么对于$P(A_j)$，通过全概率公式可知，
$$
P(A_j) = P(A_1)P(A_j|A_1) + P(\overline{A_1})P(A_j|\overline{A_1}) \\
= \frac{m}{n} \frac{m-1}{n-1} + \frac{n - m}{n} \frac{m}{n - 1} \\
$$


我们接着再来介绍全概公式一个有趣的应用：为何赌博者无限赌下去总是倾向于破产？在这个例子中，我们同时介绍一种在概率论中常用的方法：**递推公式法**。



例（赌徒破产）：一个人有a的本金，打算再赢b元就停止赌博，设每局p=1/2概率赢，输赢对金钱影响都是1，输光后自然停止赌博，求输光的概率$q(a)$。

解：

设事件$A$为第一局赢，$B_k$为有本金k时最后输光。

则$q(0)=1, q(a + b) = 0$，利用全概率公式，有
$$
q(k) = P(B_k) = P(A)P(B_k|A) + P(\overline{A})P(B_k|\overline{A}) \\
= \frac{1}{2} q(k + 1) + \frac{1}{2} q(k - 1) \\
2 q(k) = q(k + 1) + q(k - 1) \\
q(k + 1) - q(k) = q(k) - q(k - 1)
$$
故
$$
q(k + 1) - q(k) = q(k) - q(k - 1) = ... = q(1) - q(0) = q(1) - 1
$$
对上式进行累加，得到$q(n) - 1 = n(q(1) - 1)$，取$n = a + b$，可求得$q(1) - 1 = \frac{q(a + b) - 1}{a + b} \leq \frac{-1}{a + b}$。

再取n=a，有
$$
q(a) - 1 = a (q(1) - 1) = a \frac{-1}{a + b} \\
q(a) = 1 + \frac{-a}{a + b} \\
q(a) = \frac{b}{a + b}
$$
我们发现有趣的是$lim_{b \rightarrow \infty} q(a) = 1$。这说明，就算赌博在规则上完全公平，越贪心则越有可能会输光。在规则上公平的赌博中如果本金有限，一直赌下去，则必定输光。这是一个违反直觉却又无法辩驳的结论。



**定理（Bayes公式）：**

事件$A_1, A_2, ..., A_n$互斥，$B \subseteq \bigcup^n_{j=1} A_j$，若$P(B) > 0$，则$P(A_j|B) = \frac{P(A_j)P(B|A_j)}{\sum^n_{i=1} P(A_i)P(B|A_i)}$。

证明：

利用全概公式，利用条件概率乘法公式即可。
$$
后验概率 P(A_j|B) = \frac{P(B A_j)}{P(B)} = \frac{P(A_j)P(B|A_j)}{\sum^n_{i=1} P(A_i)P(B|A_i)}
$$
同样地，Bayes公式推导也很简单，但是却有着丰富的含义。



Bayes公式描述的是“学习”与“逆推”的过程。

$A_j$可以看做是诱发了事件$B$的原因，$P(A_j)$就代表每个原因可能发生的概率，使我们先天便已经具备的知识，称为**先验概率**。

而当发生了事件$B$后，我们对其引发的原因会产生新的认识，这便是$P(A_j|B)$，称为**后验概率**。

我们拿着先天的经验或知识来进行实践，得到结果后又反过来用来更新那些我们本来具有的经验知识，重复这一过程我们就可以越来越靠近真理，这便是Bayes公式表现出的“学习性”的含义。



鉴于Bayes公式的重要性，我们给出例子体会其实际应用。

例：调查发现肺癌病人中吸烟人群占99.7%，无肺癌人群中有95.8%吸烟。若在所有人群中，肺癌的发病率都为$10^{-4}$，求吸烟人群发病率是不吸烟人群发病率的多少倍？

解：

在做类似问题时应该先合理定义事件。设事件$A$为有肺癌，$B$为吸烟。

由Bayes公式，吸烟人群中有肺癌的后验概率为，$P(A|B) = \frac{P(A)P(B|A)}{P(A)P(B|A) + P(\overline{A})P(B|\overline{A})}$

这里$P(B|A)$可认为是肺癌病人中吸烟人群，即99.7%。

无肺癌人群有95.8%吸烟，即$P(B|\overline{A})$ = 95.8%。

肺癌发病率是$10^{-4}$，即$P(A) = 10^{-4}$，那么$P(\overline{A}) = 1 - 10^{-4}$。

将这些参数带入到上式中，得到$P(A|B) = 1.041 * 10^{-4}$。



同理，计算$P(A|\overline{B}) = \frac{P(A)P(\overline{B}|A)}{P(\overline{B})} = \frac{P(A)P(\overline{B}|A)}{P(A)P(\overline{B}|A) + P(\overline{A})P(\overline{B}|\overline{A})}$，得到$7.1438 * 10^{-6}$。

两者相除，故吸烟人群发病率是不吸烟人群的14.57倍。



​		我们可能认为吸烟率所差无几，所以结果不应该有那么大的患病率差别。但是我们同时也应该注意到肺癌的自然发病率极其小，在这种情况下，吸烟率的差别被放大了。能够得到很多凭借直觉所得不到的结论也是学习概率论的乐趣之一。







#### 参考 ####

---

知乎 https://zhuanlan.zhihu.com/p/42859784